{% extends 'IndicadoresBundle::standard_layout.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/indicadores/js/OrigenDatoAdmin/merge.js') }}" type="text/javascript"></script>    
{% endblock %}
{% block content %}
    <form action="{{ admin.generateUrl('merge_save') }}" method="post">
        <fieldset>
            <legend>Datos del origen fusionado</legend>
                <label for="nombre">{{'nombre'|trans}}</label><input type="text" name='nombre' placeholder="{{'nombre_origen_fusionado'|trans}}" required="true"/>
                <label for="descripcion">{{'descripcion'|trans}}</label><textarea type="text" name='descripcion' placeholder="{{'descripcion_origen_fusionado'|trans}}" ></textarea>                
        </fieldset>
    <TABLE border=1 class='table table-hover'>
        <caption><h2>Elija los campos que ser√°n parte del origen fusionado</h2></caption>
        <THEAD>
            <TR>
                <TH>{{'campos'|trans}}</TH>
                <TH>{{'origen_fusionado'|trans}}</TH>
                {% for origen in origen_dato  %}
                    <TH>
                        {{origen.nombre}}
                        <input type="hidden" value="{{origen.id}}" name='origenes_fusionados[]' />
                    </TH>
                {% endfor %}
            </TR>
        </THEAD>
        <TBODY>
            {% for i in range(1, cantidad_campos) %}
            <TR>
                <TD>{{'campo '|trans}} {{i}}</TD>
                <TD>
                    <INPUT type="text" size=25 maxlength="35" name='fusionar[{{i}}][]' 
                           placeholder="{{'nombre_campo'|trans}}" 
                           value=''
                           id='fusionar{{i}}'
                           title='{{'nombre_campo'|trans}}' 
                    />
                </TD>
                {% for origen in origen_dato  %}
                <TD class='origen{{origen.id}}'>
                    <SELECT name="fusionar[{{i}}][]" class='fusionar{{i}}' size="{{origen.campos|length}}">
                        {% for campo in origen.campos%}
                            <OPTION value="{{campo.id}}" 
                                    class="fusionar{{i}}_significado{{campo.significado.id}}_tipo{{campo.tipoCampo.id}}">{{campo.nombre}}
                            </OPTION>
                        {% endfor %}
                    </SELECT>
                </TD>
                {% endfor %}
            </TR>
            {% endfor %}
        </TBODY>
    </table>
    <div class="well form-actions">
        <input class="btn btn-primary" type="submit" value="{{'guardar'|trans}}" name="btn_save">
    </div>
    </form>
{% endblock %}