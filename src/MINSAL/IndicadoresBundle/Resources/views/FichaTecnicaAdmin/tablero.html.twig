{# Modificado para que agregar el botón para ir al listado #}

{% extends 'IndicadoresBundle::standard_layout.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bundles/indicadores/css/FichaTecnicaAdmin/tablero.css') }}" type="text/css" media="all" />
{% endblock %}    
    
{% block javascripts %}    
    {{ parent() }}
    {# <script src="{{ asset('bundles/indicadores/js/d3/d3.v3.min.js') }}" type="text/javascript"></script> #}
    <script src="{{ asset('bundles/indicadores/js/d3/d3.v2.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/indicadores/js/FichaTecnicaAdmin/comun.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/indicadores/js/FichaTecnicaAdmin/grafico_pastel.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/indicadores/js/FichaTecnicaAdmin/grafico_columnas.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/indicadores/js/FichaTecnicaAdmin/grafico_lineas.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/indicadores/js/FichaTecnicaAdmin/grafico_mapa.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/indicadores/js/FichaTecnicaAdmin/tablero.js') }}" type="text/javascript"></script>
    
    <script src="{{ asset('bundles/indicadores/js/canvg/rgbcolor.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/indicadores/js/canvg/canvg.js') }}" type="text/javascript"></script>
    
    <script src="{{ asset('bundles/indicadores/js/canvg/canvas2image.js') }}" type="text/javascript"></script>
{% endblock %}
    


{% block content %}
    <div id="div_carga">
        <img id="cargador" src="{{ asset('bundles/indicadores/images/ajax-loader.gif') }}"/>
    </div>
    <div class='btn-toolbar' >
        <div class='btn-group'> 
            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#" title="clasificación a utilizar">
                <i class="icon-filter"></i>{{'_clasificacion_indicadores_'|trans}}
                <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">                
                {% for clasificacion in clasificacionUso %}
                    {% if clasificacion.codigo == app.user.clasificacionUso.codigo|default('') %}
                        <li class='active'><A href='#'>{{clasificacion.descripcion}}</a></li>
                    {% else %}
                        <li ><a href='{{url('change_clasificacion_uso',{codigo_clasificacion:clasificacion.codigo})}}'>{{clasificacion.descripcion}}</a></li>
                    {% endif %}
                {% endfor %}
            </ul>                               
        </div>
        <div class='btn-group'> 
            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                <i class="icon-th"></i>{{'_sala_'|trans}}
                <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">                                
                <li><A id='agregar_fila' href='#'>{{'_agregar_fila_'|trans}}</a></li>
            </ul>                               
        </div>
        <div class='btn-group'>
            <a class="btn dropdown-toggle btn-success" data-toggle="dropdown" href="#">
                <i class="icon-star"></i>{{"favoritos"|trans}} (<span id='cantidad_favoritos'>{{app.user.favoritos|length}}</span>)
                <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" id='listado-favoritos'>
                {% for indicador in app.user.favoritos %}
                    <li ><A href="#" id='fav-{{indicador.id}}' class='indicador'
                            data-id='{{indicador.id}}'
                            data-unidad-medida='{{indicador.unidadMedida}}'>
                            {{indicador.nombre}}
                        </A>
                    </li>
                {% endfor %}
            </ul>
        </div>
        {% for categoria in categorias%}
            {% if categoria.indicadores|length > 0 %}
                <div class='btn-group'>
                    <a class="btn dropdown-toggle btn-info" data-toggle="dropdown" href="#">
                        {{categoria.cat.descripcion}} ({{categoria.indicadores|length}})
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" >
                        {% for indicador in categoria.indicadores %}
                            <li ><A href="#" id='{{indicador.id}}' class='indicador'
                                   data-id='{{indicador.id}}'
                                   data-unidad-medida='{{indicador.unidadMedida}}'>
                                    {{indicador.nombre}}
                                </A>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}
        {% endfor %}
        {% if indicadores_no_clasificados|length > 0 %}
            <div class='btn-group'>
                <a class="btn dropdown-toggle btn-danger" data-toggle="dropdown" href="#">
                     <i class="icon-tags"></i>{{"_no_clasificados_"|trans}} (<span id='cantidad_no_clasificados'>{{indicadores_no_clasificados|length}}</span>)
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" >
                    {% for indicador in indicadores_no_clasificados %}
                        <li ><A href="#" id='{{indicador.id}}' class='indicador'
                               data-id='{{indicador.id}}'
                               data-unidad-medida='{{indicador.unidadMedida}}'>
                                {{indicador.nombre}}
                            </A>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}               
    </div>
    <div class="content sala" >
        <div class="row-fluid">
            <div class="span4 area_grafico zona_actual" id='grafico_1' >
               <h3 class='titulo_indicador'></h3>
               <h6 class='filtros_dimensiones'></h6>
               <div class='controles btn-toolbar'></div>
               <div class="row-fluid info" ></div>
               <div class="row-fluid" >                   
                    <div class="grafico" ></div>             
               </div>                        
               <div class="row-fluid" >                   
                   <div class='span4 dimension' style='text-align: right'></div>
                   <div class='controlesDimension span4'></div>
               </div>
           </div>
           <div class="span4 area_grafico" id='grafico_2' >
               <h3 class='titulo_indicador'></h3>
               <h6 class='filtros_dimensiones'></h6>
               <div class='controles btn-toolbar'></div>
               <div class="row-fluid info" ></div>
               <div class="row-fluid" >                   
                    <div class="grafico" ></div>             
               </div>                        
               <div class="row-fluid" >                   
                   <div class='span4 dimension' style='text-align: right'></div>
                   <div class='controlesDimension span4'></div>
               </div>
           </div>
           <div class="span4 area_grafico" id='grafico_3' >
               <h3 class='titulo_indicador'></h3>
               <h6 class='filtros_dimensiones'></h6>
               <div class='controles btn-toolbar'></div>
               <div class="row-fluid info" ></div>
               <div class="row-fluid" >                   
                    <div class="grafico" ></div>             
               </div>                        
               <div class="row-fluid" >                   
                   <div class='span4 dimension' style='text-align: right'></div>
                   <div class='controlesDimension span4'></div>
               </div>
           </div>
        </div>        
    </div>
    
    <canvas id="canvas" STYLE='visibility: hidden;'></canvas> 
{% endblock %}
